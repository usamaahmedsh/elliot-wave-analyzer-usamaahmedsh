# High-Performance Configuration for GPU + 32 CPU cores
# Optimized for: 1 GPU (140GB), 32 CPU cores
# Expected speedup: 20-50x over default config

# Time window settings
days: 365
slide_weeks: 1
min_weeks: 4
max_weeks: 12
grow_weeks: 1

# Wave detection parameters
up_to: 20  # Maximum wave degree to search
top_n: 10  # Top N patterns to return per symbol

# CPU parallelism (use 30 of 32 cores)
processes: 30
concurrency: 30

# CPU batching (optimized for high core count)
cpu_batch_size: 2048      # Larger batches since we have 32 cores
cpu_top_k: 256            # Keep more candidates for GPU scoring
max_combinations: 500000  # Increased search space

# GPU acceleration settings
use_gpu: true             # Enable GPU batch scoring
gpu_batch_size: 20000     # Process 20k candidates per GPU batch (utilize 140GB)
gpu_enabled_stages:       # Which stages use GPU
  - fibonacci_scoring
  - rule_checking
  - ensemble_scoring

# Multi-start search (high accuracy)
enable_multi_start: true
max_start_points: 8       # More start points with GPU acceleration

# Overlapping windows (better coverage)
window_overlap_ratio: 0.5  # 50% overlap for maximum pattern detection

# Window budget (process more windows in parallel)
max_windows: 2000         # Increased from 500 (we have 30 workers)

# Shared memory optimization
use_shared_memory: true   # Avoid copying arrays to workers

# Pattern scanning
scan_pattern_types: all   # Scan both impulsive and corrective patterns

# Pre-scoring (quick filters before GPU)
pre_score_top_k: 10000    # Keep top 10k for GPU scoring
pre_score_threshold: 0.1  # Minimum score to consider
pre_score_weights: [0.4, 0.3, 0.2, 0.1]  # volatility, range, extrema, slope

# Performance tuning
delay: 0.1                # Reduced delay (faster iteration)
profile: true             # Keep profiling enabled
save_images: false        # Disable image generation for speed
chunk_size: 0
min_volatility: 0.0
skip_flat_windows: true   # Skip low-volatility windows

# Output
out_dir: output
save_images_top_n: 1
